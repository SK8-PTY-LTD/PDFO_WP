!function(t){"use strict";var e=!0,r=t("body").hasClass("rtl"),a={vars:{filter_id:"",property_items:[]},init:function(){this.filterCarousel(),this.resize(),ERE.select_term(),this.cityFilterScrollBar();var e=t(".property-sync-content-wrap");e.each(function(){a.syncPropertyCarousel(t(this))}),this.calcPaddingTopBottom(),setTimeout(this.calcPaddingTopBottom,300),setTimeout(this.calcPaddingTopBottom,1e3)},filterCarousel:function(){var e=t('[data-filter-type="carousel"]');e.each(function(){var e=t("a",t(this));a.executeFilter(e)})},executeFilter:function(r){t(r).button({loadingText:'<span class="fa fa-spinner fa-spin"></span>'}),t(r).parent().next().children("select").children().button({loadingText:'<span class="fa fa-spinner fa-spin"> Loading ...</span>'}),r.on("click",function(i){i.preventDefault();var o=t(this),n=o.parent().attr("data-filter_id"),s=t('.property-content[data-filter_id="'+n+'"]'),c=s.parent();if(o.hasClass("active-filter"))return o.css("cursor","not-allowed"),!1;if(o.parent().children("a").css("cursor","wait"),e){e=!1;var l=o.data("filter"),p=o.parent().next().children("select");if(a.vars.filter_id=o.parent().data("filter_id"),o.parent().find(".active-filter").removeClass("active-filter"),o.addClass("active-filter"),c.css("height",c.outerHeight()),"undefined"==typeof a.vars.property_items[l+"-"+a.vars.filter_id]){o.css("width",o.outerWidth()),p.children().button("loading");var d=o.button("loading"),u=r.closest(".filter-wrap").data("admin-url");t.ajax({url:u,data:{action:"ere_property_featured_fillter_city_ajax",layout_style:o.parent().data("layout_style"),property_type:o.parent().data("property_type"),property_status:o.parent().data("property_status"),property_feature:o.parent().data("property_feature"),property_cities:o.parent().data("property_cities"),property_state:o.parent().data("property_state"),property_neighborhood:o.parent().data("property_neighborhood"),property_label:o.parent().data("property_label"),color_scheme:o.parent().data("color_scheme"),item_amount:o.parent().data("item_amount"),image_size:o.parent().data("image_size"),include_heading:o.parent().data("include_heading"),heading_sub_title:o.parent().data("heading_sub_title"),heading_title:o.parent().data("heading_title"),heading_text_align:o.parent().data("heading_text_align"),property_city:o.data("filter"),el_class:o.parent().data("el_class")},success:function(r){var i=t(".property-item",r);a.vars.property_items[l+"-"+a.vars.filter_id]=r,s.css("opacity",0),s.trigger("destroy.owl.carousel"),s.html(i),s.css("opacity",1),s.imagesLoaded(function(){ERE.set_item_effect(i,"hide"),ERE_Carousel.owlCarousel(),i=t(".property-item",s),ERE.set_item_effect(i,"show"),setTimeout(function(){c.css("height","auto")},200)}),setTimeout(function(){o.css("width","auto")},100),e=!0,d.button("reset"),p.children().button("reset"),p.removeAttr("disabled"),p.children("option").removeAttr("selected"),p.children('option[value="'+l+'"]').attr("selected","selected"),o.parent().children("a").css("cursor","pointer"),o.parent().children(".active-filter").css("cursor","not-allowed")},error:function(){d.button("reset"),e=!0}})}else{var f=a.vars.property_items[l+"-"+a.vars.filter_id],h=t(".property-item",f);s.css("opacity",0),s.trigger("destroy.owl.carousel"),s.html(h),ERE.set_item_effect(h,"hide"),s.css("opacity",1),ERE_Carousel.owlCarousel(),s.imagesLoaded(function(){h=t(".property-item",s),ERE.set_item_effect(h,"show"),setTimeout(function(){c.css("height","auto")},200)}),e=!0,p.removeAttr("disabled"),p.children("option").removeAttr("selected"),p.children('option[value="'+l+'"]').attr("selected","selected"),o.parent().children("a").css("cursor","pointer"),o.parent().children(".active-filter").css("cursor","not-allowed")}}})},resize:function(){t(window).resize(function(){a.executeResize()}),t(window).on("orientationchange",function(){a.executeResize()})},executeResize:function(){t(".property-content.owl-carousel").each(function(){var e=t(this);setTimeout(function(){var r=t(".property-item",e);ERE.set_item_effect(r,"show")},500)}),a.cityFilterScrollBar();var e=t(".property-sync-content-wrap");e.each(function(){a.syncPropertyCarousel(t(this))}),a.calcPaddingTopBottom()},cityFilterScrollBar:function(){t(".property-filter-content",".property-cities-filter").each(function(){var e=t(this);e.outerHeight()>530?(e.css("height","530px"),e.css("overflow-y","auto"),t.isFunction(t.fn.perfectScrollbar)&&e.perfectScrollbar({wheelSpeed:.5,suppressScrollX:!0})):e.css("height","auto")})},syncPropertyCarousel:function(e){function a(t){var e=t.item.index;n.find(".owl-item").removeClass("current").eq(e).addClass("current");var r=n.find(".owl-item.active").length-1,a=n.find(".owl-item.active").first().index(),i=n.find(".owl-item.active").last().index();e>i&&n.data("owl.carousel").to(e,500,!0),a>e&&n.data("owl.carousel").to(e-r,500,!0)}function i(t){var e=t.item.index;o.data("owl.carousel").to(e,500,!0)}var o=e.find(".property-content-carousel"),n=e.find(".property-image-carousel");o.owlCarousel({items:1,nav:!1,dots:!1,loop:!1,smartSpeed:500,rtl:r}).on("changed.owl.carousel",a),n.on("initialized.owl.carousel",function(){n.find(".owl-item").eq(0).addClass("current")}).owlCarousel({items:1,nav:!0,navText:['<i class="fa fa-angle-left"></i>','<i class="fa fa-angle-right"></i>'],dots:!1,rtl:r,margin:0}).on("changed.owl.carousel",i),n.on("click",".owl-item",function(e){if(e.preventDefault(),!t(this).hasClass("current")){var r=t(this).index();o.data("owl.carousel").to(r,500,!0)}})},calcPaddingTopBottom:function(){t(".main-content-inner",".property-sync-carousel").each(function(){var e=t(this),r=e.height(),a=e.parent().next(".property-image-content").children().outerHeight(),i=parseInt(a)-parseInt(r);i>0&&window.matchMedia("(min-width: 1200px)").matches?e.css({"padding-top":i/2+"px","padding-bottom":i/2+"px"}):e.css({"padding-top":"","padding-bottom":""})})}};t(document).ready(function(){a.init()})}(jQuery);