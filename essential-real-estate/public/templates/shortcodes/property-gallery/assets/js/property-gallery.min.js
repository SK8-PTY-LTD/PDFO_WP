!function(e){"use strict";var t=!0,i={vars:{filter_id:"",property_items:[]},init:function(){this.filterCarousel(),this.filterRow(),this.resize(),ERE.select_term()},filterCarousel:function(){var t=e('[data-filter-type="carousel"]');t.each(function(){var t=e("a",e(this));i.executeFilter("filterCarousel",t)})},filterRow:function(){var r=e('[data-filter-type="filter"]'),a=r.data("item"),o=e("body").hasClass("rtl");"undefined"==typeof a&&(a=".property-item"),e('[data-layout="fitRows"]').each(function(){var t=e(this);t.imagesLoaded(function(){t.isotope({itemSelector:a,layoutMode:"fitRows",isOriginLeft:!o,transitionDuration:"0.8s"}).isotope("layout")})}),e(document).on("vc-tab-clicked",function(t,i){e('[data-layout="fitRows"]',i).each(function(){e(this).isotope("layout")})}),e(r).each(function(){if("filter-isotope"==e(this).data("filter-style"))e("a",e(this)).on("click",function(i){i.preventDefault();var r=e(this).parent().attr("data-filter_id"),a=e('.property-content[data-filter_id="'+r+'"]'),o=!0;if(e(this).hasClass("active-filter")&&(o=!1),t&&o){var s=e(this).attr("data-filter");a.isotope({filter:s}),e(this).parent().children("a").css("cursor","pointer"),e(this).parent().children("a").removeClass("active-filter"),e(this).addClass("active-filter"),e(this).css("cursor","not-allowed");var n=e(this).parent().next().children("select");n.removeAttr("disabled"),n.children("option").removeAttr("selected"),n.children('option[value="'+s+'"]').attr("selected","selected"),n.val()!=s&&n.selectize()[0].selectize.setValue(s)}});else{var r=e("a",e(this));i.executeFilter("filterRow",r)}})},executeFilter:function(r,a){e(a).button({loadingText:'<span class="fa fa-spinner fa-spin"></span>'}),e(a).parent().next().children("select").children().button({loadingText:'<span class="fa fa-spinner fa-spin"> Loading ...</span>'}),a.on("click",function(o){o.preventDefault();var s=e(this),n=s.parent().attr("data-filter_id"),l=e('.property-content[data-filter_id="'+n+'"]'),c=l.parent();if(s.hasClass("active-filter"))return s.css("cursor","not-allowed"),!1;if(s.parent().children("a").css("cursor","wait"),t){t=!1;var d=s.data("filter"),f=s.parent().next().children("select");if(i.vars.filter_id=s.parent().data("filter_id"),s.parent().find(".active-filter").removeClass("active-filter"),s.addClass("active-filter"),c.css("height",c.outerHeight()),"undefined"==typeof i.vars.property_items[d+"-"+i.vars.filter_id]){s.css("width",s.outerWidth()),f.children().button("loading");var u=s.button("loading"),p=a.closest(".filter-inner").data("admin-url");e.ajax({url:p,data:{action:"ere_property_gallery_fillter_ajax",is_carousel:s.parent().data("is-carousel"),columns_gap:s.parent().data("columns-gap"),columns:s.parent().data("columns"),property_type:s.data("filter"),item_amount:s.parent().data("item-amount"),image_size:s.parent().data("image-size"),color_scheme:s.parent().data("color_scheme")},success:function(a){var o=e(".property-item",a);i.vars.property_items[d+"-"+i.vars.filter_id]=a,l.css("opacity",0),"filterRow"==r?l.isotope("destroy"):l.trigger("destroy.owl.carousel"),l.html(o),"filterRow"==r&&ERE.set_item_effect(o,"hide"),l.css("opacity",1),l.imagesLoaded(function(){"filterCarousel"==r?(ERE.set_item_effect(o,"hide"),ERE_Carousel.owlCarousel()):i.filterRow(),o=e(".property-item",l),ERE.set_item_effect(o,"show"),setTimeout(function(){c.css("height","auto")},200)}),setTimeout(function(){s.css("width","auto")},100),t=!0,u.button("reset"),f.children().button("reset"),f.removeAttr("disabled"),f.children("option").removeAttr("selected"),f.children('option[value="'+d+'"]').attr("selected","selected"),s.parent().children("a").css("cursor","pointer"),s.parent().children(".active-filter").css("cursor","not-allowed")},error:function(){u.button("reset"),t=!0}})}else{var h=i.vars.property_items[d+"-"+i.vars.filter_id],m=e(".property-item",h);"filterRow"==r&&l.isotope("destroy"),l.css("opacity",0),"filterCarousel"==r&&l.trigger("destroy.owl.carousel"),l.html(m),ERE.set_item_effect(m,"hide"),l.css("opacity",1),"filterCarousel"==r&&ERE_Carousel.owlCarousel(),l.imagesLoaded(function(){m=e(".property-item",l),ERE.set_item_effect(m,"show"),setTimeout(function(){c.css("height","auto")},200),"filterRow"==r&&i.filterRow()}),t=!0,f.removeAttr("disabled"),f.children("option").removeAttr("selected"),f.children('option[value="'+d+'"]').attr("selected","selected"),s.parent().children("a").css("cursor","pointer"),s.parent().children(".active-filter").css("cursor","not-allowed")}}})},resize:function(){e(window).resize(function(){i.executeResize()}),e(window).on("orientationchange",function(){i.executeResize()})},executeResize:function(){e(".property-content.owl-carousel").each(function(){var t=e(this);setTimeout(function(){var i=e(".property-item",t);ERE.set_item_effect(i,"show")},500)})}};e(document).ready(function(){i.init()})}(jQuery);